<!DOCTYPE html>
<html>


<head>
</head>
<link href=".\ScenarioPages\ScenarioView.css" rel="stylesheet" type="text/css">

<body id = "backForPage">

    <main>
        <div class = "PositionColor">
            <h1>Scenario</h1>
            
            <% table.forEach(columns => { %>
            
                <table style = "">
                    <thead>
                        <tr>
                            <% Object.getOwnPropertyNames(columns[0]).forEach ( (headName) => { %>
                                <th> <%= headName %>  </th>
                                
                             <% }) %>
                            
                        </tr>
                       
                    </thead>
                    <tbody>
                        <% columns.forEach(function(column, index){ %>
                            <% column = Object.values(column) %>
                            <tr>
                                <% column.forEach((element, index) => { %>
                                   <% if (index == 3) { %>
                                        <td>
                                            <div id = "container">
                                                <button id = "myBtn" style="color: white;">
                                                    Script
                                                </button>
                                    
                                                <div id = "myModal" class = "modal">
                                                    <div class="modal-content">
                                                       <!-- <% const regex = /\\n|\\r\\n|\\n\\r|\\r/g; %>
                                                        <% element.replace(regex, '<br>'); %> -->
                                                        <span class="close">&times;</span>                                                        
                                                        <p style="white-space: pre-line; text-align: center;"><%= element %></p>
                                                    </div>
                                                </div>
                                    
                                            </div>
                                        </td>
                                        <%  } else { %>
                                        <td> <%= element %> </td>
                                   <% } %>
                                    
                               <% }); %>
                              
                            </tr> 
                        <% }); %>
                        

                      

                    </tbody>
                </table>    

           <% }); %>
                        <button id = "addNewObject"style = "height: 54px;">  <a href="/ScenarioAdd">
                            Добавить фильм
                        </a> </button>
                        

                    </tbody>
                </table>    
                
            
        </div>
    </main>

    <footer>

</body>

<script>
    
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal 
        btn.onclick = function() {
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
          modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
          if (event.target == modal) {
            modal.style.display = "none";
          }
        }
    
</script>
</html>